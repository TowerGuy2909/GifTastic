<!DOCTYPE html>
<html>
<head>
	<title>
		
	</title>
</head>
<body>

	<button data-animal ="cat">cats</button>

	<button data-animal ="dog">dogs</button>

	<button data-animal ="bird">birds</button>

	<div id="gifs-appear-here">
		
	</div>

	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<script type="text/javascript">

		$("button").on("click", function(){


			var animal = $(this).data("animal");

			var number = Math.floor(Math.random()*1000) + 1;

			var queryURL = "https://api.giphy.com/v1/gifs/search?api_key=oaHSY8wjitMacRaxtHhnX6NFULHXtffh&q=" + animal +"&limit=10&rating=g&offset=" + number;

			$.ajax({
				url: queryURL,
				method: "GET"
			}).done(function(response){

				var results = response.data;
				
				$('#gifs-appear-here').empty();

				for (var i = 0; i < results.length; i++) {

					var animalDiv = $('<button>')

					var p = $('<p>').text("Rating: " + results[i].rating);

					var animalImage = $('<img>');

					animalImage.addClass('gif');

					animalImage.attr('src',  results[i].images.fixed_height_still.url);

					animalImage.attr("data-state", "still");

					animalImage.attr("data-still",  results[i].images.fixed_height_still.url);

					animalImage.attr("data-animate",  results[i].images.fixed_height.url);

					animalDiv.append(p);
					
					animalDiv.append(animalImage);

					$('#gifs-appear-here').prepend(animalDiv);

				}

				$(".gif").on("click", function() {
     				
     				var state = $(this).attr("data-state");
      				
      				if (state === "still") {

      					$(this).attr("src", $(this).attr("data-animate"));

      					$(this).attr("data-state", "animate");

      				} else {

      					$(this).attr("src", $(this).attr("data-still"));

      					$(this).attr("data-state", "still");

      				}
      			});
			});
		});

	</script>
</body>

</html>